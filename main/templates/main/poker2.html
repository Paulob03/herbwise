<!DOCTYPE html>
<html>
<head>
    <title>Roulette Odds Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --red: #c62828;
            --black: #212121;
            --green: #2e7d32;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
            font-family: Arial, sans-serif;
        }

        .input-section {
            margin-bottom: 15px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 8px;
            width: 120px;
            flex: 1;
        }

        button {
            padding: 8px 12px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            flex: 1;
        }

        .history {
            margin-top: 15px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 3px;
            margin-top: 10px;
        }

        .number-item {
            padding: 8px;
            text-align: center;
            border-radius: 4px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1;
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            margin-top: 10px;
            font-size: 0.9em;
        }

        th, td {
            padding: 6px;
            text-align: left;
        }

        .highlight {
            background-color: #e8f5e9;
        }

        @media (min-width: 600px) {
            .grid {
                grid-template-columns: repeat(19, 1fr);
            }
            
            .number-item {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Roulette Analyzer</h1>
        <div class="input-section">
            <input type="number" id="numberInput" min="0" max="36" placeholder="Number (0-36)">
            <button id="addButton">Add</button>
            <button id="clearButton">Clear</button>
        </div>

        <div class="history">
            <h3>Recent Numbers</h3>
            <div class="grid" id="historyGrid"></div>
        </div>

        <div class="stats-section">
            <div class="stat-card">
                <h3>Numbers</h3>
                <div class="grid" id="numberGrid"></div>
            </div>

            <div class="stat-card">
                <h3>Even/Odd</h3>
                <table>
                    <tr><th>Type</th><th>Count</th><th>%</th></tr>
                    <tbody id="parityStats"></tbody>
                </table>
            </div>

            <div class="stat-card">
                <h3>Red/Black</h3>
                <table>
                    <tr><th>Color</th><th>Count</th><th>%</th></tr>
                    <tbody id="colorStats"></tbody>
                </table>
            </div>

            <div class="stat-card">
                <h3>Rows/Columns</h3>
                <table>
                    <tr><th>Type</th><th>Count</th><th>%</th></tr>
                    <tbody id="rowColStats"></tbody>
                </table>
            </div>

            <div class="stat-card">
                <h3>Pairs/Quads</h3>
                <table>
                    <tr><th>Type</th><th>Count</th><th>%</th></tr>
                    <tbody id="pairStats"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const redNumbers = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
        let stats = {
            numbers: {},
            red: 0,
            black: 0,
            odd: 0,
            even: 0,
            rows: [0, 0, 0],    // 1-12, 13-24, 25-36
            columns: [0, 0, 0], // 3 vertical columns
            pairs: {},
            quads: {},
            history: []
        };

        function getNumberColor(num) {
            num = parseInt(num);
            if (num === 0) return 'var(--green)';
            return redNumbers.has(num) ? 'var(--red)' : 'var(--black)';
        }

        function getRow(num) {
            return num === 0 ? -1 : Math.floor((num - 1) / 12);
        }

        function getColumn(num) {
            return num === 0 ? -1 : (num - 1) % 3;
        }

        function updateStats(num) {
            // Update basic stats
            stats.numbers[num] = (stats.numbers[num] || 0) + 1;
            
            if (num !== 0) {
                num % 2 === 0 ? stats.even++ : stats.odd++;
                redNumbers.has(num) ? stats.red++ : stats.black++;
                
                const row = getRow(num);
                if (row >= 0) stats.rows[row]++;
                
                const col = getColumn(num);
                if (col >= 0) stats.columns[col]++;
            }

            // Update pairs and quads
            if (stats.history.length > 0) {
                const lastNum = stats.history[stats.history.length - 1];
                const pairKey = [lastNum, num].sort().join('-');
                stats.pairs[pairKey] = (stats.pairs[pairKey] || 0) + 1;
            }

            if (stats.history.length >= 3) {
                const quad = stats.history.slice(-3).concat(num).sort().join('-');
                stats.quads[quad] = (stats.quads[quad] || 0) + 1;
            }

            stats.history.push(num);
        }

        function renderTable(data, total, elementId) {
            return Object.entries(data)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5)
                .map(([key, count]) => `
                    <tr>
                        <td>${key}</td>
                        <td>${count}</td>
                        <td>${((count / total) * 100 || 0).toFixed(1)}%</td>
                    </tr>
                `).join('');
        }

        function updateDisplay() {
            // History grid
            document.getElementById('historyGrid').innerHTML = 
                stats.history.slice(-25).reverse().map(num => `
                    <div class="number-item" style="background:${getNumberColor(num)}">
                        ${num}
                    </div>
                `).join('');

            // Number grid
            document.getElementById('numberGrid').innerHTML = 
                Array.from({length: 37}, (_, i) => i).map(num => `
                    <div class="number-item" 
                         style="background:${getNumberColor(num)};${stats.numbers[num] ? 'font-weight:bold' : ''}">
                        ${num}<br>
                        <small>${stats.numbers[num] || ''}</small>
                    </div>
                `).join('');

            // Stats tables
            const total = stats.history.length;
            const spinsWithoutZero = total - (stats.numbers[0] || 0);

            document.getElementById('parityStats').innerHTML = `
                ${makeRow('Even', stats.even, stats.even + stats.odd)}
                ${makeRow('Odd', stats.odd, stats.even + stats.odd)}
            `;

            document.getElementById('colorStats').innerHTML = `
                ${makeRow('Red', stats.red, spinsWithoutZero)}
                ${makeRow('Black', stats.black, spinsWithoutZero)}
                ${makeRow('Green', stats.numbers[0] || 0, total)}
            `;

            document.getElementById('rowColStats').innerHTML = `
                ${makeRow('Row 1-12', stats.rows[0], spinsWithoutZero)}
                ${makeRow('Row 13-24', stats.rows[1], spinsWithoutZero)}
                ${makeRow('Row 25-36', stats.rows[2], spinsWithoutZero)}
                ${makeRow('Column 1', stats.columns[0], spinsWithoutZero)}
                ${makeRow('Column 2', stats.columns[1], spinsWithoutZero)}
                ${makeRow('Column 3', stats.columns[2], spinsWithoutZero)}
            `;

            document.getElementById('pairStats').innerHTML = 
                renderTable(stats.pairs, total, 'pairStats') ||
                '<tr><td colspan="3">No pairs yet</td></tr>';
        }

        function makeRow(label, count, total) {
            const percentage = total > 0 ? (count / total * 100).toFixed(1) : '0.0';
            return `<tr ${count < total/2 ? 'class="highlight"' : ''}>
                <td>${label}</td>
                <td>${count}</td>
                <td>${percentage}%</td>
            </tr>`;
        }

        document.getElementById('addButton').addEventListener('click', () => {
            const input = document.getElementById('numberInput');
            const num = parseInt(input.value);
            
            if (num >= 0 && num <= 36) {
                updateStats(num);
                updateDisplay();
                input.value = '';
            }
        });

        document.getElementById('clearButton').addEventListener('click', () => {
            stats = {
                numbers: {},
                red: 0,
                black: 0,
                odd: 0,
                even: 0,
                rows: [0, 0, 0],
                columns: [0, 0, 0],
                pairs: {},
                quads: {},
                history: []
            };
            updateDisplay();
        });

        updateDisplay();
    </script>
</body>
</html>